import queue
import random

from fake_useragent import UserAgent

PROXY_LIST = ["200.229.195.185:8080", "200.229.195.163:8080", "200.196.231.131:8080", "200.229.193.102:8080",
              "213.136.87.65:80", "177.53.140.86:8799", "66.70.190.244:8080", "138.197.139.135:3128",
              "167.114.188.3:8080", "138.197.165.71:8080", "142.93.254.222:80", "192.99.226.30:80", "35.236.68.63:8080",
              "142.93.11.154:8080", "80.211.181.37:3128", "80.211.180.201:80", "80.211.97.229:8080",
              "80.211.48.120:3128", "45.55.27.161:3128", "113.255.181.162:8380", "162.243.107.45:3128",
              "162.243.108.129:3128", "162.243.99.57:3128", "192.241.245.207:3128", "144.217.163.138:3128",
              "188.226.141.127:3128", "88.198.24.108:3128", "85.26.146.169:80", "194.147.24.7:21231", "35.199.96.12:80",
              "138.68.59.192:8080", "204.48.22.246:8080", "45.33.62.21:80", "142.93.251.113:8799", "217.23.13.129:1080",
              "138.68.232.41:3128", "104.236.238.10:3128", "67.205.149.230:3128", "162.243.107.43:8080",
              "138.68.120.201:3128", "192.241.150.188:8080", "138.68.161.60:3128", "138.197.58.55:3128",
              "46.238.120.149:8080", "176.36.180.115:31280", "95.85.58.154:8080", "37.59.32.112:1080",
              "173.192.21.89:25", "185.2.82.20:1080", "139.162.235.163:31028", "138.68.240.218:3128",
              "45.55.27.17:8080", "67.205.174.209:3128", "134.119.184.83:1080", "185.2.82.159:1080",
              "139.59.169.246:8080", "176.9.119.170:8080", "217.23.10.39:1080", "50.203.239.19:80", "139.59.61.29:8080",
              "67.205.132.241:8080", "138.68.173.29:8080", "162.243.175.141:3128", "139.59.61.229:3128",
              "138.68.173.29:8080", "162.243.175.141:3128", "139.59.61.229:3128", "185.93.3.123:8080",
              "138.68.161.157:8080", "138.68.235.8:3128", "95.85.58.154:3128", "18.228.14.44:8080", "176.9.75.42:3128",
              "45.55.16.10:8080", "139.59.99.63:3128", "138.197.157.32:3128", "139.59.99.119:8080",
              "138.68.161.14:8080", "139.59.79.2:8080", "162.243.108.141:3128", "139.59.53.106:3128",
              "145.239.81.69:8080", "67.205.146.29:3128", "138.68.169.8:8080", "138.68.165.154:3128",
              "46.4.96.137:8080", "50.203.239.26:80", "223.19.51.247:80", "185.2.82.52:1080", "5.148.128.44:8080",
              "139.59.99.119:3128", "188.166.216.210:3128", "159.8.114.37:80", "178.62.193.19:3128",
              "178.62.193.19:8080", "138.68.198.203:3128", "94.177.237.184:8080", "89.140.125.17:80",
              "139.59.109.156:8080", "138.68.161.157:3128", "151.106.25.29:1080", "158.69.243.155:8888",
              "118.193.26.18:8080", "185.2.82.23:1080", "138.68.169.77:8080", "138.197.157.45:3128",
              "138.68.232.41:8080", "138.197.145.77:3128", "207.154.231.211:3128", "162.243.108.161:3128",
              "162.243.107.120:8080", "188.226.141.127:8080", "138.197.157.66:3128", "151.80.36.115:1080",
              "138.68.41.90:3128", "192.241.149.141:3128", "162.243.108.161:8080", "95.85.36.236:8080",
              "92.222.180.156:3128", "192.241.245.207:8080", "138.197.157.44:8080", "138.197.157.60:3128",
              "178.33.9.99:1080", "50.203.239.20:80", "139.59.53.106:8080", "220.90.147.137:80", "138.68.235.8:8080",
              "217.23.6.40:3128", "139.59.61.229:8080", "207.154.231.208:8080", "178.33.9.100:1080",
              "134.119.184.74:1080", "188.226.141.211:3128", "188.226.141.61:3128", "146.185.168.235:3128",
              "139.59.79.2:3128", "138.68.161.60:8080", "139.59.61.29:3128", "98.142.36.181:80", "185.2.82.24:1080",
              "192.241.150.188:3128", "67.205.132.241:3128", "80.211.170.159:80", "145.239.81.69:3128",
              "139.59.101.223:3128", "188.226.141.219:3128", "138.197.204.55:8080", "138.197.157.32:8080",
              "98.142.38.163:80", "5.196.205.139:3128", "207.154.231.209:3128", "139.59.59.63:8080", "50.203.239.22:80",
              "144.217.163.138:8080", "162.243.108.129:8080", "207.154.231.216:8080", "95.85.36.236:3128",
              "138.197.145.103:8080", "68.185.57.66:80", "50.203.239.23:80", "71.13.131.142:80", "134.119.184.75:1080",
              "80.211.181.37:80", "109.236.91.222:1080", "67.205.146.77:3128", "139.59.99.63:8080",
              "139.59.99.101:3128", "188.166.216.210:8080", "188.226.141.217:8080", "138.68.161.14:3128",
              "188.226.141.216:8080", "50.203.239.28:80", "163.47.11.113:8080", "138.68.169.8:3128",
              "207.154.231.212:3128", "162.243.78.25:3128", "50.203.239.29:80", "50.203.239.25:80",
              "138.68.24.145:8080", "139.59.53.105:3128", "139.59.99.234:8080", "139.59.53.105:8080",
              "67.205.146.29:8080", "138.197.145.103:3128", "207.154.231.216:3128", "138.68.165.154:8080",
              "46.5.252.70:8080", "207.154.231.209:8080", "176.9.75.42:8080", "50.203.239.18:80", "139.59.59.63:3128",
              "138.197.157.68:3128"]


class ProxyHelper:

    def __init__(self, proxy_list):
        self.proxies = queue.Queue()
        random.shuffle(proxy_list)
        [self.proxies.put(proxy) for proxy in proxy_list]

    def put(self, proxy):
        self.proxies.put(proxy)

    def get(self, hide=True):
        proxy_ip = self.proxies.get()
        return {
            'proxy': {'http': 'http://' + proxy_ip} if hide else {},
            'user-agent': {'user-agent': UserAgent().random},
            'ip': proxy_ip
        }

# JS to get proxy run @ https://hidemyna.me/en/proxy-list/?maxtime=1000&type=h&anon=34&start=64#list
#
# ips = $x('//table//td[1]/text()')
# ports = $x('//table//td[2]/text()')
# ip_port = []
#
# for (var i = 0; i < ips.length; i++) {
#     ip_port.push(ips[i].nodeValue + ':' + ports[i].nodeValue)
# }
#
# console.log(ip_port)
